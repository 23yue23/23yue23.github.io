<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>蜗牛笔记</title>
  
  <subtitle>骑士的心</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://23yue23.github.io/"/>
  <updated>2019-09-27T05:45:04.862Z</updated>
  <id>https://23yue23.github.io/</id>
  
  <author>
    <name>Brady</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>面试资料</title>
    <link href="https://23yue23.github.io/2019/09/25/%E9%9D%A2%E8%AF%95%E8%B5%84%E6%96%99/"/>
    <id>https://23yue23.github.io/2019/09/25/面试资料/</id>
    <published>2019-09-25T06:44:17.000Z</published>
    <updated>2019-09-27T05:45:04.862Z</updated>
    
    <content type="html"><![CDATA[<p>1.语言类</p><blockquote><p><a href="https://mp.weixin.qq.com/s/11vry9estQtQmQnRnbTksQ" target="_blank" rel="noopener">scala</a></p></blockquote><blockquote><p><a href="https://mp.weixin.qq.com/s/VIUlROU2hhz7oeOFTVC5sA" target="_blank" rel="noopener">scala</a></p></blockquote><blockquote><p><a href="https://mp.weixin.qq.com/s/n7u4nIvpyjMjTA4Yo1w5JQ" target="_blank" rel="noopener">sql</a></p></blockquote><p>知识扩展：<br>1.<a href="https://mp.weixin.qq.com/s/hccUo170_8lhdv6C3OzGzw" target="_blank" rel="noopener">推荐系统实现</a></p><p>2.<a href="https://mp.weixin.qq.com/s/tek6kQb7t8tRQi8OiOj3Zw" target="_blank" rel="noopener">用户行为数据收集系统-(1)简介</a></p><p>3.<a href="https://mp.weixin.qq.com/s/OTNSptAO01y5gAwnSRpZZQ" target="_blank" rel="noopener">用户行为数据收集系统–(2)客户端SDK设计</a></p><p>4.<a href="https://mp.weixin.qq.com/s/rQnqsALpqPnN0RoTOyFJow" target="_blank" rel="noopener">用户行为数据收集系统–(3)数据接收端设计</a></p><p>5.<a href="https://mp.weixin.qq.com/s/ffFy6eE_N5QKn_-o6mqQ5g" target="_blank" rel="noopener">大数据世界</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1.语言类&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/11vry9estQtQmQnRnbTksQ&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;scala&lt;/a&gt;&lt;/p&gt;
&lt;/bloc
      
    
    </summary>
    
    
      <category term="面试资料" scheme="https://23yue23.github.io/tags/%E9%9D%A2%E8%AF%95%E8%B5%84%E6%96%99/"/>
    
  </entry>
  
  <entry>
    <title>promethus-问题篇</title>
    <link href="https://23yue23.github.io/2019/09/25/promethus-%E9%97%AE%E9%A2%98%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/promethus-问题篇/</id>
    <published>2019-09-25T06:08:30.000Z</published>
    <updated>2019-09-25T06:44:42.128Z</updated>
    
    <content type="html"><![CDATA[<h4 id="address-already-in-use"><a href="#address-already-in-use" class="headerlink" title="address already in use"></a>address already in use</h4><blockquote><p>保存信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error starting web server: listen tcp 0.0.0.0:9090: bind: address already in use</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>解决方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i :9090</span><br><span class="line">sudo kill -9  prot</span><br></pre></td></tr></table></figure></p></blockquote><p>#### </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;address-already-in-use&quot;&gt;&lt;a href=&quot;#address-already-in-use&quot; class=&quot;headerlink&quot; title=&quot;address already in use&quot;&gt;&lt;/a&gt;address already in u
      
    
    </summary>
    
      <category term="promethus" scheme="https://23yue23.github.io/categories/promethus/"/>
    
    
      <category term="promethus-问题篇" scheme="https://23yue23.github.io/tags/promethus-%E9%97%AE%E9%A2%98%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>promethus-学习篇</title>
    <link href="https://23yue23.github.io/2019/09/25/promethus-%E5%AD%A6%E4%B9%A0%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/promethus-学习篇/</id>
    <published>2019-09-25T05:12:29.000Z</published>
    <updated>2019-09-25T06:17:15.153Z</updated>
    
    <content type="html"><![CDATA[<p>####grafana 安装和常用配置</p><p>#####常用配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">配置：</span><br><span class="line">    配置文件应位于/usr/local/etc/grafana/grafana.ini。</span><br><span class="line">日志：</span><br><span class="line">    日志文件应位于/usr/local/var/log/grafana/grafana.log。</span><br><span class="line">插件：</span><br><span class="line">    如果你想手动安装一个插件，请点击此处：/usr/local/var/lib/grafana/plugins。</span><br><span class="line">数据库：</span><br><span class="line">    默认的sqlite数据库位于 /usr/local/var/lib/grafana</span><br></pre></td></tr></table></figure></p><h5 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.grafana.com/oss/release/grafana-6.3.5.linux-amd64.tar.gz</span><br><span class="line">tar -zxvf grafana-6.3.5.linux-amd64.tar.gz</span><br><span class="line">conf/grafana.ini</span><br><span class="line">./bin/grafana-server web</span><br></pre></td></tr></table></figure><h5 id="mac-安装方式"><a href="#mac-安装方式" class="headerlink" title="mac 安装方式"></a>mac 安装方式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">安装：brew install grafana</span><br><span class="line">执行：brew services start grafana</span><br><span class="line">重启：brew services restart grafana</span><br><span class="line"></span><br><span class="line">#Log</span><br><span class="line">/usr/local/var/log/grafana/grafana.log</span><br><span class="line"></span><br><span class="line">#conf</span><br><span class="line">/usr/local/etc/grafana/grafana.ini</span><br><span class="line"></span><br><span class="line">#plugins</span><br><span class="line">/usr/local/var/lib/grafana/plugins</span><br><span class="line"></span><br><span class="line">#database</span><br><span class="line">/usr/local/var/lib/grafana</span><br></pre></td></tr></table></figure><hr><h4 id="Metrics-类型"><a href="#Metrics-类型" class="headerlink" title="Metrics 类型"></a>Metrics 类型</h4><h5 id="Counter（计数器）"><a href="#Counter（计数器）" class="headerlink" title="Counter（计数器）"></a>Counter（计数器）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#获取样本数据</span><br><span class="line">node_cpu&#123;cpu=&quot;cpu0&quot;,mode=&quot;idle”&#125; </span><br><span class="line">#通过rate()函数获取HTTP请求量的增长率</span><br><span class="line">rate(http_requests_total[5m])</span><br><span class="line"># 查询当前系统中，访问量前10的HTTP地址：</span><br><span class="line">topk(10, http_requests_total)</span><br></pre></td></tr></table></figure><h5 id="Gauge-可增可减的仪表盘"><a href="#Gauge-可增可减的仪表盘" class="headerlink" title="Gauge 可增可减的仪表盘"></a>Gauge 可增可减的仪表盘</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">预测系统磁盘空间在4个小时之后的剩余情况：</span><br><span class="line">predict_linear(node_filesystem_free&#123;job=&quot;node&quot;&#125;[1h], 4 * 3600)</span><br></pre></td></tr></table></figure><h5 id="Histogram和Summary分析数据分布情况"><a href="#Histogram和Summary分析数据分布情况" class="headerlink" title="Histogram和Summary分析数据分布情况"></a>Histogram和Summary分析数据分布情况</h5><hr><h4 id="PromQL基础"><a href="#PromQL基础" class="headerlink" title="PromQL基础"></a>PromQL基础</h4><h5 id="基本函数语法"><a href="#基本函数语法" class="headerlink" title="基本函数语法"></a>基本函数语法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">prometheus_http_requests_total </span><br><span class="line"> 等价于</span><br><span class="line">prometheus_http_requests_total&#123;&#125;</span><br></pre></td></tr></table></figure><p>#####条件筛选<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">prometheus_http_requests_total&#123;instance=&quot;localhost:9090”&#125;</span><br><span class="line">不满足条件</span><br><span class="line">prometheus_http_requests_total&#123;instance!=&quot;localhost:9090”&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持使用正则表达式作为匹配条件，多个表达式之间使用|进行分离：</span><br><span class="line">使用label=~regx表示选择那些标签符合正则表达式定义的时间序列； 反之使用label!~regx进行排除</span><br><span class="line">http_requests_total&#123;environment=~&quot;staging|testing|development&quot;,method!=&quot;GET”&#125;</span><br></pre></td></tr></table></figure><h5 id="范围查询"><a href="#范围查询" class="headerlink" title="范围查询"></a>范围查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例如：查询最近5分钟</span><br><span class="line">http_request_total&#123;&#125;[5m] </span><br><span class="line">s - 秒 m - 分钟 h - 小时 d - 天 w - 周 y - 年</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">瞬时向量表达式或者区间向量表达式中，都是以当前时间为基准</span><br><span class="line">http_request_total&#123;&#125; # 瞬时向量表达式，选择当前最新的数据</span><br><span class="line">http_request_total&#123;&#125;[5m]  # 区间向量表达式，选择以当前时间为基准，5分钟内的数据</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果我们想查询，5分钟前的瞬时样本数据，或昨天一天的区间内的样本数据呢? 这个时候我们就可以使用位移操作，位移操作的关键字为offset</span><br><span class="line">http_request_total&#123;&#125; offset 5m </span><br><span class="line">http_request_total&#123;&#125;[1d] offset 1d</span><br></pre></td></tr></table></figure><h5 id="聚合操作"><a href="#聚合操作" class="headerlink" title="聚合操作"></a>聚合操作</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> 查询系统所有http请求的总量</span><br><span class="line">sum(http_request_total)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> 按照mode计算主机CPU的平均使用时间</span><br><span class="line">avg(node_cpu) by (mode)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> 按照主机查询各个主机的CPU使用率</span><br><span class="line">sum(sum(irate(node_cpu&#123;mode!=&apos;idle&apos;&#125;[5m])) / sum(irate(node_cpu[5m]))) by (instance)</span><br></pre></td></tr></table></figure><h5 id="支持的算法："><a href="#支持的算法：" class="headerlink" title="支持的算法："></a>支持的算法：</h5><ul><li>(加法) - (减法) * (乘法) / (除法) % (求余) ^ (幂运算)</li></ul><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;####grafana 安装和常用配置&lt;/p&gt;
&lt;p&gt;#####常用配置&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br
      
    
    </summary>
    
      <category term="promethus" scheme="https://23yue23.github.io/categories/promethus/"/>
    
    
      <category term="promethus-学习篇" scheme="https://23yue23.github.io/tags/promethus-%E5%AD%A6%E4%B9%A0%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>cassandra-资料篇</title>
    <link href="https://23yue23.github.io/2019/09/25/cassandra-%E8%B5%84%E6%96%99%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/cassandra-资料篇/</id>
    <published>2019-09-25T05:05:43.000Z</published>
    <updated>2019-09-25T10:02:19.749Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Youte-视频"><a href="#Youte-视频" class="headerlink" title="Youte 视频"></a>Youte 视频</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DataStax Accelerate 2019 — Full Session Recordings： </span><br><span class="line">https://www.youtube.com/playlist?list=PLm-EPIkBI3YpJbuKUGDlZVNHzT0umcBSl 大概85个视频，涉及到cassandra各个方面。</span><br><span class="line">下次会议是 https://apachecon.com/acna19/s/#/schedule?search=cassandra </span><br><span class="line">可以关注下</span><br><span class="line">https://issues.apache.org/jira/browse/CASSANDRA-11815</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Youte-视频&quot;&gt;&lt;a href=&quot;#Youte-视频&quot; class=&quot;headerlink&quot; title=&quot;Youte 视频&quot;&gt;&lt;/a&gt;Youte 视频&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
      <category term="cassandra" scheme="https://23yue23.github.io/categories/cassandra/"/>
    
    
      <category term="cassandra-资料篇" scheme="https://23yue23.github.io/tags/cassandra-%E8%B5%84%E6%96%99%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>zeppelin-问题篇</title>
    <link href="https://23yue23.github.io/2019/09/25/zeppelin-%E9%97%AE%E9%A2%98%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/zeppelin-问题篇/</id>
    <published>2019-09-25T03:42:07.000Z</published>
    <updated>2019-09-25T03:53:34.326Z</updated>
    
    <content type="html"><![CDATA[<h4 id="hive-task-失败"><a href="#hive-task-失败" class="headerlink" title="hive task 失败"></a>hive task 失败</h4><blockquote><p>报错信息：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR [bc60fbe1-ee2a-49e5-8932-231b92250134 main] ql.Driver: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>问题原因：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">作业被kill 掉后，会出现以上信息。</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="Apache-zeppelin-process-died"><a href="#Apache-zeppelin-process-died" class="headerlink" title="Apache zeppelin process died"></a>Apache zeppelin process died</h4><blockquote><p>报错信息：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Apache zeppelin process died</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>解决方法:<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">服务失败，重启服务</span><br><span class="line">ps -ef | grep &quot;zeppelin&quot;</span><br><span class="line">  kill -9 pid</span><br><span class="line">  sudo bin/zeppelin-daemon.sh restart</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="权限问题，无法执行"><a href="#权限问题，无法执行" class="headerlink" title="权限问题，无法执行"></a>权限问题，无法执行</h4><blockquote><p>报错信息：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell_web_path is: http://zeppeline.com:8070/file/. shell/xianchang.yue</span><br><span class="line">Job 20190815-140750_2122347662 finished by scheduler org.apache.zeppelin.interpreter.remote.RemoteInterpreter-shell::2EHURB1RG-shared_session</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>解决方法：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">切换当前，shell的目录为可执行的目录 chown -R XXX:XXX shell/</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="connection-refused-错误"><a href="#connection-refused-错误" class="headerlink" title="connection refused 错误"></a>connection refused 错误</h4><blockquote><p>报错原因：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可能正在使用过期的开发终端节点。尝试创建新的开发终端节点并重新连接。</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>解决方法：(推荐第一种，不可以后再选择第二种)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.重新创建新的note 进行执行。会建立新的连接。</span><br><span class="line">2.连接超时或由于任何原因停止工作，则您可能需要采取以下步骤来还原它：</span><br><span class="line">    (1). 在 Zeppelin 中，在页面右上角的下拉菜单中，选择 Interpreters (解释器)。在解释器页面上，搜索 spark。选择 edit，然后清除 Connect to existing process 复选框。在页面底部选择 Save。</span><br><span class="line">    (2). 如前所述启动 SSH 端口转发。</span><br><span class="line">    (3). 在 Zeppelin 中，重新启用 spark 解释器的 Connect to existing process 设置，然后再次保存。</span><br><span class="line">像这样重置解释器应该会恢复连接。另一种实现方法是在 Interpreters 页面上为 Spark 解释器选择 restart。然后，等待最多 30 秒，以确保远程解释器已重新启动。</span><br></pre></td></tr></table></figure></p></blockquote><p>#### </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;hive-task-失败&quot;&gt;&lt;a href=&quot;#hive-task-失败&quot; class=&quot;headerlink&quot; title=&quot;hive task 失败&quot;&gt;&lt;/a&gt;hive task 失败&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;报错信息：&lt;br&gt;    &lt;fig
      
    
    </summary>
    
      <category term="zeppelin" scheme="https://23yue23.github.io/categories/zeppelin/"/>
    
    
      <category term="zeppelin-问题篇" scheme="https://23yue23.github.io/tags/zeppelin-%E9%97%AE%E9%A2%98%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>grafana-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/grafana-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/grafana-常用篇/</id>
    <published>2019-09-25T03:34:07.000Z</published>
    <updated>2019-09-25T03:43:03.749Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="grafana" scheme="https://23yue23.github.io/categories/grafana/"/>
    
    
      <category term="grafana-常用篇" scheme="https://23yue23.github.io/tags/grafana-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>nginx-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/nginx-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/nginx-常用篇/</id>
    <published>2019-09-25T03:16:30.000Z</published>
    <updated>2019-09-25T03:16:30.469Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>zabbix-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/zabbix-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/zabbix-常用篇/</id>
    <published>2019-09-25T03:16:12.000Z</published>
    <updated>2019-09-25T03:16:12.250Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>promethus-资料篇</title>
    <link href="https://23yue23.github.io/2019/09/25/promethus-%E8%B5%84%E6%96%99%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/promethus-资料篇/</id>
    <published>2019-09-25T03:15:47.000Z</published>
    <updated>2019-09-25T03:15:47.303Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>promethus-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/promethus-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/promethus-常用篇/</id>
    <published>2019-09-25T03:15:31.000Z</published>
    <updated>2019-09-25T06:23:57.601Z</updated>
    
    <content type="html"><![CDATA[<h4 id="模版案例"><a href="#模版案例" class="headerlink" title="模版案例"></a>模版案例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scrape_configs:</span><br><span class="line">  - job_name:       &apos;example-random&apos;</span><br><span class="line">    # Override the global default and scrape targets from this job every 5 seconds.</span><br><span class="line">    scrape_interval: 5s</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [&apos;localhost:8070&apos;, &apos;localhost:8071&apos;]</span><br><span class="line">        labels:</span><br><span class="line">          group: &apos;production&apos;</span><br><span class="line">      - targets: [&apos;localhost:8072&apos;]</span><br><span class="line">        labels:</span><br><span class="line">          group: ‘canary&apos;</span><br></pre></td></tr></table></figure><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">查看进程端口：</span><br><span class="line">    pgrep -f prometheus</span><br><span class="line"></span><br><span class="line">解决端口占用： </span><br><span class="line"> lsof -i :9090</span><br><span class="line"> sudo kill -9  prot    </span><br><span class="line"></span><br><span class="line">启动进程：</span><br><span class="line">     ./prometheus --config.file=prometheus.yml</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;模版案例&quot;&gt;&lt;a href=&quot;#模版案例&quot; class=&quot;headerlink&quot; title=&quot;模版案例&quot;&gt;&lt;/a&gt;模版案例&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
      <category term="promethus" scheme="https://23yue23.github.io/categories/promethus/"/>
    
    
      <category term="promethus-常用篇" scheme="https://23yue23.github.io/tags/promethus-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>hadoop-问题篇</title>
    <link href="https://23yue23.github.io/2019/09/25/hadoop-%E9%97%AE%E9%A2%98%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/hadoop-问题篇/</id>
    <published>2019-09-25T03:14:22.000Z</published>
    <updated>2019-09-25T03:14:22.437Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hadoop-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/hadoop-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/hadoop-常用篇/</id>
    <published>2019-09-25T03:14:09.000Z</published>
    <updated>2019-09-25T07:16:01.427Z</updated>
    
    <content type="html"><![CDATA[<h4 id="hadoop-命令"><a href="#hadoop-命令" class="headerlink" title="hadoop 命令"></a>hadoop 命令</h4><blockquote><p>cat<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将路径指定文件的内容输出到stdout。</span><br><span class="line">示例：</span><br><span class="line">  hadoop fs -cat hdfs://host1:port1/file1hdfs://host2:port2/file2</span><br><span class="line">  hadoop fs -cat file:///file3 /user/hadoop/file4</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>dus<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用方法：hadoop fs -dus &lt;args&gt;显示文件的大小</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>test<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用方法：hadoop fs -test -[ezd] URI</span><br><span class="line">选项：</span><br><span class="line">-e 检查文件是否存在。如果存在则返回0。</span><br><span class="line">-z 检查文件是否是0字节。如果是则返回0。 </span><br><span class="line">-d 如果路径是个目录，则返回1，否则返回0。</span><br><span class="line">示例：</span><br><span class="line">  hadoop fs -test -e filename</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>查看.gz 的文件内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*无需解压整个文件： </span><br><span class="line"> hadoop fs -cat /hdfs_location/part-00000.gz | zcat | head -n 20</span><br><span class="line">  或者 hadoop fs -cat /hdfs_location/part-00000.gz | zmore</span><br><span class="line"></span><br><span class="line">*需要解压整个文件：</span><br><span class="line">hadoop fs -text /myfolder/part-r-00024.gz | tail</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>查看.bz2 的文件内容</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类似查看.gz的方法，只需将zcat换为bzcat， 或者将zmore换为bzmore即可</span><br></pre></td></tr></table></figure><h4 id="yarn-命令"><a href="#yarn-命令" class="headerlink" title="yarn 命令"></a>yarn 命令</h4><h5 id="查看-application列表"><a href="#查看-application列表" class="headerlink" title="查看 application列表 :"></a>查看 application列表 :</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn application -list</span><br></pre></td></tr></table></figure><h5 id="查看单独的logs-日志："><a href="#查看单独的logs-日志：" class="headerlink" title="查看单独的logs 日志："></a>查看单独的logs 日志：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn logs -applicationId  application_1493700892407_0007</span><br><span class="line">yarn logs -applicationId application_1542870632001_26426 &gt; ./application.log</span><br></pre></td></tr></table></figure><h5 id="查看当前作业的状态："><a href="#查看当前作业的状态：" class="headerlink" title="查看当前作业的状态："></a>查看当前作业的状态：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn application -status application_1542870632001_26426</span><br></pre></td></tr></table></figure><h5 id="kill-当前作业"><a href="#kill-当前作业" class="headerlink" title="kill 当前作业"></a>kill 当前作业</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn application -kill application_1542870632001_26426</span><br></pre></td></tr></table></figure><p>#####查看yarn-site.xml，确定log配置目录以及集群ip</p><hr><h4 id="hadoop-集群配置"><a href="#hadoop-集群配置" class="headerlink" title="hadoop 集群配置"></a>hadoop 集群配置</h4><h5 id="日志清理"><a href="#日志清理" class="headerlink" title="日志清理"></a>日志清理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">相关参数：</span><br><span class="line">key : mapreduce.jobhistory.max-age-ms</span><br><span class="line">value : 2592000000 (30天)</span><br><span class="line">descrption：负责清理hdfs路径下日志 /var/hadoop/mapred/mr-history/done</span><br><span class="line">key : yarn.log-aggregation.retain-seconds</span><br><span class="line">value : 2592000 （30天）</span><br><span class="line">description：负责清理hdfs路径下日志 /var/hadoop/yarn/$&#123;user&#125;/logs</span><br><span class="line">服务器上的本地日志在任务执行完进行日志聚合之后会自动进行删除，不过老数据目前还没有清理。</span><br></pre></td></tr></table></figure><h6 id="日志相关参数"><a href="#日志相关参数" class="headerlink" title="日志相关参数"></a>日志相关参数</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1) yarn.log-aggregation-enable</span><br><span class="line">    是否开启日志聚合功能</span><br><span class="line">2) yarn.log-aggregation.retain-seconds</span><br><span class="line">    hdfs上的日志保留多久。当前配置路径为：/var/hadoop/yarn/$&#123;user&#125;/logs</span><br><span class="line">3) yarn.log-aggregation.retain-check-interval-seconds</span><br><span class="line">    多长时间检查一次日志，并将满足条件的删除，如果是0或者负数，则为上一个值的1/10，已经配置为：1296000（15天）</span><br><span class="line">4) yarn.nodemanager.remote-app-log-dir</span><br><span class="line">    前缀目录：/var/hadoop/yarn</span><br><span class="line">5) yarn.nodemanager.remote-app-log-dir-suffix</span><br><span class="line">    后缀目录：logs</span><br><span class="line">6) yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds</span><br><span class="line">    每隔一段时间进行日志的聚合，当前配置为：3600。如果配置为-1，则会等待任务执行完还会聚合</span><br></pre></td></tr></table></figure><h6 id="日志聚合参数配置"><a href="#日志聚合参数配置" class="headerlink" title="日志聚合参数配置"></a>日志聚合参数配置</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yarn.log-aggregation-enable</span><br><span class="line">参数说明：是否启用日志聚合功能，日志聚合开启后保存到HDFS上。默认值：false</span><br><span class="line">yarn.log-aggregation.retain-seconds</span><br><span class="line">参数说明：聚合后的日志在HDFS上保存多长时间，单位为s。默认值：-1（不启用日志聚合），例如设置为86400，24小时</span><br><span class="line">yarn.log-aggregation.retain-check-interval-seconds</span><br><span class="line">参数说明：删除任务在HDFS上执行的间隔，执行时候将满足条件的日志删除（超过参数2设置的时间的日志），如果是0或者负数，则为参数2设置值的1/10，上例值在此处为8640s。默认值：-1</span><br><span class="line">yarn.nodemanager.log.retain-seconds</span><br><span class="line">参数说明：当不启用日志聚合此参数生效，日志文件保存在本地的时间，单位为s。默认值：10800</span><br><span class="line">yarn.nodemanager.remote-app-log-dir</span><br><span class="line">参数说明：当应用程序运行结束后，日志被转移到的HDFS目录（启用日志聚集功能时有效），修改为保存的日志文件夹。默认值：/tmp/logs</span><br><span class="line">yarn.nodemanager.remote-app-log-dir-suffix</span><br><span class="line">参数说明：远程日志目录子目录名称（启用日志聚集功能时有效）。默认值：logs 日志将被转移到目录$&#123;yarn.nodemanager.remote-app-log-dir&#125;/$&#123;user&#125;/$&#123;thisParam&#125;下</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;hadoop-命令&quot;&gt;&lt;a href=&quot;#hadoop-命令&quot; class=&quot;headerlink&quot; title=&quot;hadoop 命令&quot;&gt;&lt;/a&gt;hadoop 命令&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;cat&lt;br&gt;&lt;figure class=&quot;highlig
      
    
    </summary>
    
      <category term="hadoop" scheme="https://23yue23.github.io/categories/hadoop/"/>
    
    
      <category term="hadoop-常用篇" scheme="https://23yue23.github.io/tags/hadoop-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>airflow-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/airflow-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/airflow-常用篇/</id>
    <published>2019-09-25T03:13:52.000Z</published>
    <updated>2019-09-25T03:13:52.761Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Azkaban-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/Azkaban-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/Azkaban-常用篇/</id>
    <published>2019-09-25T03:13:34.000Z</published>
    <updated>2019-09-25T03:13:34.455Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>kylin-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/kylin-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/kylin-常用篇/</id>
    <published>2019-09-25T03:13:05.000Z</published>
    <updated>2019-09-25T03:13:05.922Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>kylin-资料篇</title>
    <link href="https://23yue23.github.io/2019/09/25/kylin-%E8%B5%84%E6%96%99%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/kylin-资料篇/</id>
    <published>2019-09-25T03:12:51.000Z</published>
    <updated>2019-09-25T03:12:51.616Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>kylin-学习篇</title>
    <link href="https://23yue23.github.io/2019/09/25/kylin-%E5%AD%A6%E4%B9%A0%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/kylin-学习篇/</id>
    <published>2019-09-25T03:12:40.000Z</published>
    <updated>2019-09-25T03:12:40.464Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>superset-常用篇</title>
    <link href="https://23yue23.github.io/2019/09/25/superset-%E5%B8%B8%E7%94%A8%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/superset-常用篇/</id>
    <published>2019-09-25T03:12:20.000Z</published>
    <updated>2019-09-25T03:12:20.116Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>superset-资料篇</title>
    <link href="https://23yue23.github.io/2019/09/25/superset-%E8%B5%84%E6%96%99%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/superset-资料篇/</id>
    <published>2019-09-25T03:11:59.000Z</published>
    <updated>2019-09-25T03:11:59.512Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>zeppelin-学习篇</title>
    <link href="https://23yue23.github.io/2019/09/25/zeppelin-%E5%AD%A6%E4%B9%A0%E7%AF%87/"/>
    <id>https://23yue23.github.io/2019/09/25/zeppelin-学习篇/</id>
    <published>2019-09-25T03:11:25.000Z</published>
    <updated>2019-09-25T03:11:25.454Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
</feed>
